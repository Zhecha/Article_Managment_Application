{"ast":null,"code":"var _jsxFileName = \"/media/user/HDD/taskList/client/src/components/App.js\";\nimport React from 'react';\nimport Authentication from './Authentication';\nimport SignUp from './SignUp';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { checkAuth, init } from '../redux/actions/AppActions';\nimport { token } from './Token';\nimport { withRouter } from \"react-router\";\nimport * as route from '../constants/routes';\nimport ArticleList from './ArticleList';\nimport CreateArticle from './CreateArticle';\nimport EditArticle from './EditArticle';\nimport ArticleComments from './ArticleComments';\n\nclass App extends React.Component {\n  async componentDidMount() {\n    if (token.getToken()) {\n      try {\n        await this.props.checkAuth(token.getToken());\n        this.props.init(true);\n        const genreRoute = this.props.location.search.length ? this.props.location.pathname + this.props.location.search : this.props.location.pathname;\n        this.props.history.push(genreRoute);\n      } catch (error) {\n        this.props.init(true);\n        this.props.history.push(route.SIGN_IN);\n      }\n    } else {\n      this.props.init(true);\n      this.props.history.push(route.SIGN_UP);\n    }\n  }\n\n  render() {\n    if (this.props.inited) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: route.ARTICLE_LIST,\n        component: ArticleList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: route.CREATE_ARTICLE,\n        component: CreateArticle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: route.SIGN_IN,\n        component: Authentication,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: route.SIGN_UP,\n        component: SignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: route.EDIT_ARTICLE,\n        component: EditArticle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: route.ARTICLE_COMMENTS,\n        component: ArticleComments,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }), React.createElement(Redirect, {\n        from: \"/\",\n        to: route.ARTICLE_LIST,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"Loading...\");\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    inited: state.app.inited\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    checkAuth: token => dispatch(checkAuth(token)),\n    init: inited => dispatch(init(inited))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));","map":{"version":3,"sources":["/media/user/HDD/taskList/client/src/components/App.js"],"names":["React","Authentication","SignUp","Route","Switch","Redirect","connect","checkAuth","init","token","withRouter","route","ArticleList","CreateArticle","EditArticle","ArticleComments","App","Component","componentDidMount","getToken","props","genreRoute","location","search","length","pathname","history","push","error","SIGN_IN","SIGN_UP","render","inited","ARTICLE_LIST","CREATE_ARTICLE","EDIT_ARTICLE","ARTICLE_COMMENTS","mapStateToProps","state","app","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Authentication from './Authentication';\nimport SignUp from './SignUp';\nimport {Route,Switch,Redirect} from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport {checkAuth, init} from '../redux/actions/AppActions';\nimport {token} from './Token';\nimport { withRouter } from \"react-router\";\nimport * as route from '../constants/routes';\nimport ArticleList from './ArticleList';\nimport CreateArticle from './CreateArticle';\nimport EditArticle from './EditArticle';\nimport ArticleComments from './ArticleComments';\n\nclass App extends React.Component {\n\n    async componentDidMount() {\n        if(token.getToken()){\n            try {\n                await this.props.checkAuth(token.getToken());\n                this.props.init(true);\n                const genreRoute =  this.props.location.search.length ? this.props.location.pathname + this.props.location.search : this.props.location.pathname;\n                this.props.history.push(genreRoute);\n            } catch (error) {\n                this.props.init(true);\n                this.props.history.push(route.SIGN_IN);\n            }\n        } else {\n            this.props.init(true);\n            this.props.history.push(route.SIGN_UP);\n        }\n    }\n\n    render() {\n        if(this.props.inited) {\n            return (\n                <div>\n                    <Switch>\n                        <Route exact path={route.ARTICLE_LIST} component={ArticleList}/>\n                        <Route path={route.CREATE_ARTICLE} component={CreateArticle}/>\n                        <Route path={route.SIGN_IN} component={Authentication}/>\n                        <Route path={route.SIGN_UP} component={SignUp}/>\n                        <Route path={route.EDIT_ARTICLE} component={EditArticle}/>\n                        <Route path={route.ARTICLE_COMMENTS} component={ArticleComments}/>\n                        <Redirect from='/' to={route.ARTICLE_LIST}/>\n                    </Switch>\n                </div>\n            )\n        } else {\n            return (\n                <h1>Loading...</h1>\n            )\n        }\n\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        inited: state.app.inited\n    }\n};\n  \nconst mapDispatchToProps = (dispatch) => {\n    return {\n        checkAuth: (token) => dispatch(checkAuth(token)),\n        init:(inited) => dispatch(init(inited))\n    }\n};\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));\n"]},"metadata":{},"sourceType":"module"}